document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".search-toggle");e&&e.addEventListener("click",function(){});const t=document.querySelectorAll(".product-gallery img, .gift-gallery img"),n=document.querySelector(".product-main-image img, .gift-main-image img");t&&n&&t.forEach(e=>{e.addEventListener("click",function(){n.src=this.src})});const s=document.querySelector(".newsletter-form");s&&s.addEventListener("submit",function(e){e.preventDefault()})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".site-header");let n=0,s=100;function t(){if(!e)return;const t=e.offsetHeight||0;document.documentElement.style.setProperty("--header-offset",t+"px")}t(),window.addEventListener("load",t),window.addEventListener("resize",t),window.addEventListener("scroll",()=>{const t=window.scrollY;t>0?e.classList.add("shadow"):e.classList.remove("shadow"),t>s&&(t>n?e.classList.add("header-hidden"):e.classList.remove("header-hidden")),n=t},{passive:!0})}),function(){const o="roks_cart_v1",n=30*24*60*60*1e3;function t(){try{const t=localStorage.getItem(o);if(!t)return{items:[],expiresAt:Date.now()+n};const e=JSON.parse(t);return!e.expiresAt||e.expiresAt<Date.now()?(localStorage.removeItem(o),{items:[],expiresAt:Date.now()+n}):(Array.isArray(e.items)||(e.items=[]),e)}catch{return{items:[],expiresAt:Date.now()+n}}}function s(e){e.expiresAt=Date.now()+n,localStorage.setItem(o,JSON.stringify(e))}function a(){return document.body&&document.body.dataset.currency||"$"}function i(e){return`${a()}${(Number(e)||0).toFixed(2)}`}const e={get(){return t()},add(n){const o=t(),a=`${n.id}::${n.variantId||""}`,i=o.items.findIndex(e=>`${e.id}::${e.variantId||""}`===a);i>=0?o.items[i].qty+=n.qty||1:o.items.push({...n,qty:n.qty||1}),s(o),e.updateUI(),e.open()},remove(n){const o=t();o.items.splice(n,1),s(o),e.updateUI(),e.render()},updateQty(n,o){const a=t();if(!a.items[n])return;let i=parseInt(o,10);(!Number.isFinite(i)||i<1)&&(i=1),a.items[n].qty=i,s(a),e.updateUI(),e.render()},clear(){s({items:[],expiresAt:Date.now()+n}),e.updateUI(),e.render()},total(){const e=t();return e.items.reduce((e,t)=>e+(Number(t.price)||0)*(t.qty||1),0)},count(){const e=t();return e.items.reduce((e,t)=>e+(t.qty||0),0)},open(){const t=document.getElementById("cartModal");t&&(t.style.display="block"),document.body.classList.add("modal-open"),e.render()},close(){const e=document.getElementById("cartModal");e&&(e.style.display="none"),document.body.classList.remove("modal-open")},render(){const n=document.getElementById("cartItems"),s=document.getElementById("cartTotal");if(!n)return;const o=t();n.innerHTML="",o.items.length===0?n.innerHTML="<p>Your cart is empty.</p>":o.items.forEach((e,t)=>{const s=document.createElement("div");s.className="cart-item",s.innerHTML=`
                        <div class="cart-item-content" data-url="${e.url||"#"}" style="cursor: pointer;">
                            ${e.image?`<img src="${e.image}" alt="${e.title}" class="cart-item-thumbnail">`:""}
                            <div class="cart-item-info">
                                <div class="cart-item-title">${e.title}${e.variantName?` — ${e.variantName}`:""}</div>
                                <div class="cart-item-meta">${i(e.price)} × ${e.qty}</div>
                            </div>
                        </div>
                        <div class="qty-controls">
                            <label for="cartQty-${t}" class="sr-only">Quantity</label>
                            <input id="cartQty-${t}" class="qty-input" type="number" min="1" step="1" value="${e.qty}" data-index="${t}">
                        </div>
                        <button class="remove-item" data-index="${t}" aria-label="Remove">&times;</button>
                    `,n.appendChild(s)}),s&&(s.textContent=i(e.total())),e.updateUI()},updateUI(){const t=document.getElementById("cartCount");t&&(t.textContent=String(e.count()))}};window.Cart=e,document.addEventListener("DOMContentLoaded",function(){const s=document.getElementById("cartToggle"),o=document.getElementById("closeCartModal"),i=document.getElementById("cartModal"),a=document.getElementById("clearCartBtn"),n=document.querySelectorAll(".checkout-btn"),t=document.getElementById("cartItems");s&&s.addEventListener("click",()=>e.open()),o&&o.addEventListener("click",()=>e.close()),a&&a.addEventListener("click",()=>e.clear()),n&&n.length&&n.forEach(e=>{e.addEventListener("click",()=>{window.Checkout&&typeof window.Checkout.startCheckout=="function"?window.Checkout.startCheckout():alert("Checkout module not loaded yet. Please try again.")})}),i&&window.addEventListener("click",function(t){t.target===i&&e.close()}),t&&(t.addEventListener("click",n=>{const s=n.target;if(s&&s.classList&&s.classList.contains("remove-item")){const t=Number(s.getAttribute("data-index"));Number.isNaN(t)||e.remove(t);return}if(s&&s.classList&&s.classList.contains("cart-item-content")){const e=s.getAttribute("data-url");e&&e!=="#"&&(window.location.href=e);return}let o=s;for(;o&&o!==t;){if(o.classList&&o.classList.contains("cart-item-content")){const e=o.getAttribute("data-url");e&&e!=="#"&&(window.location.href=e);return}o=o.parentElement}}),t.addEventListener("change",t=>{const n=t.target;if(!n||!n.classList||!n.classList.contains("qty-input"))return;const s=Number(n.getAttribute("data-index")),o=parseInt(n.value,10);Number.isNaN(s)||e.updateQty(s,o)}));const r=document.getElementById("addToCartBtn");r&&r.addEventListener("click",function(){const t=document.getElementById("productDetail");if(!t)return;const o=t.dataset.id,c=t.dataset.url,i=t.dataset.title,l=t.dataset.image;let n=0,a=null,r=null;const s=document.getElementById("variantSelect");if(s){const e=s.options[s.selectedIndex];n=parseFloat(e.dataset.price||"0"),a=e.value,r=e.textContent}else{const e=document.getElementById("productPrice");e&&(n=parseFloat(e.textContent.replace(/[^0-9.]/g,"")||"0"))}if(!o||!i||!(n>0)){alert("Please select an option.");return}e.add({id:o,url:c,title:i,image:l,price:n,variantId:a,variantName:r,qty:1})}),e.updateUI()})}()