document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".search-toggle");e&&e.addEventListener("click",function(){});const t=document.querySelectorAll(".product-gallery img"),n=document.querySelector(".product-main-image img");t&&n&&t.forEach(e=>{e.addEventListener("click",function(){n.src=this.src})});const s=document.querySelector(".newsletter-form");s&&s.addEventListener("submit",function(e){e.preventDefault()})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".site-header");let n=0,s=100;function t(){if(!e)return;const t=e.offsetHeight||0;document.documentElement.style.setProperty("--header-offset",t+"px")}t(),window.addEventListener("load",t),window.addEventListener("resize",t),window.addEventListener("scroll",()=>{const t=window.scrollY;t>0?e.classList.add("shadow"):e.classList.remove("shadow"),t>s&&(t>n?e.classList.add("header-hidden"):e.classList.remove("header-hidden")),n=t},{passive:!0})}),function(){const s="roks_cart_v1",n=30*24*60*60*1e3;function t(){try{const t=localStorage.getItem(s);if(!t)return{items:[],expiresAt:Date.now()+n};const e=JSON.parse(t);return!e.expiresAt||e.expiresAt<Date.now()?(localStorage.removeItem(s),{items:[],expiresAt:Date.now()+n}):(Array.isArray(e.items)||(e.items=[]),e)}catch{return{items:[],expiresAt:Date.now()+n}}}function o(e){e.expiresAt=Date.now()+n,localStorage.setItem(s,JSON.stringify(e))}function a(){return document.body&&document.body.dataset.currency||"$"}function i(e){return`${a()}${(Number(e)||0).toFixed(2)}`}const e={get(){return t()},add(n){const s=t(),a=`${n.id}::${n.variantId||""}`,i=s.items.findIndex(e=>`${e.id}::${e.variantId||""}`===a);i>=0?s.items[i].qty+=n.qty||1:s.items.push({...n,qty:n.qty||1}),o(s),e.updateUI(),e.open()},remove(n){const s=t();s.items.splice(n,1),o(s),e.updateUI(),e.render()},clear(){o({items:[],expiresAt:Date.now()+n}),e.updateUI(),e.render()},total(){const e=t();return e.items.reduce((e,t)=>e+(Number(t.price)||0)*(t.qty||1),0)},count(){const e=t();return e.items.reduce((e,t)=>e+(t.qty||0),0)},open(){const t=document.getElementById("cartModal");t&&(t.style.display="block"),document.body.classList.add("modal-open"),e.render()},close(){const e=document.getElementById("cartModal");e&&(e.style.display="none"),document.body.classList.remove("modal-open")},render(){const n=document.getElementById("cartItems"),s=document.getElementById("cartTotal");if(!n)return;const o=t();n.innerHTML="",o.items.length===0?n.innerHTML="<p>Your cart is empty.</p>":o.items.forEach((e,t)=>{const s=document.createElement("div");s.className="cart-item",s.innerHTML=`
                        <div class="cart-item-info">
                            <div class="cart-item-title">${e.title}${e.variantName?` — ${e.variantName}`:""}</div>
                            <div class="cart-item-meta">${i(e.price)} × ${e.qty}</div>
                        </div>
                        <button class="remove-item" data-index="${t}" aria-label="Remove">&times;</button>
                    `,n.appendChild(s)}),s&&(s.textContent=i(e.total())),e.updateUI()},updateUI(){const t=document.getElementById("cartCount");t&&(t.textContent=String(e.count()))}};window.Cart=e,document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("cartToggle"),n=document.getElementById("closeCartModal"),s=document.getElementById("cartModal"),o=document.getElementById("clearCartBtn"),i=document.getElementById("checkoutBtn"),a=document.getElementById("cartItems");t&&t.addEventListener("click",()=>e.open()),n&&n.addEventListener("click",()=>e.close()),o&&o.addEventListener("click",()=>e.clear()),i&&i.addEventListener("click",()=>{alert("Checkout is not configured yet.")}),s&&window.addEventListener("click",function(t){t.target===s&&e.close()}),a&&a.addEventListener("click",t=>{const n=t.target;if(n&&n.classList&&n.classList.contains("remove-item")){const t=Number(n.getAttribute("data-index"));Number.isNaN(t)||e.remove(t)}});const r=document.getElementById("addToCartBtn");r&&r.addEventListener("click",function(){const t=document.getElementById("productDetail");if(!t)return;const o=t.dataset.id,c=t.dataset.url,i=t.dataset.title,l=t.dataset.image;let n=0,a=null,r=null;const s=document.getElementById("variantSelect");if(s){const e=s.options[s.selectedIndex];n=parseFloat(e.dataset.price||"0"),a=e.value,r=e.textContent}else{const e=document.getElementById("productPrice");e&&(n=parseFloat(e.textContent.replace(/[^0-9.]/g,"")||"0"))}if(!o||!i||!(n>0)){alert("Please select an option.");return}e.add({id:o,url:c,title:i,image:l,price:n,variantId:a,variantName:r,qty:1})}),e.updateUI()})}()