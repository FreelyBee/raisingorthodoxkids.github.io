(function(){const e={index:null,isOpen:!1,debounceTimer:null};function t(e){return document.querySelector(e)}function u(e){return Array.from(document.querySelectorAll(e))}function i(){const s=t("#searchModal");if(!s)return;s.style.display="block",document.body.classList.add("modal-open"),e.isOpen=!0;const n=t("#searchInput");n&&(n.focus(),n.select()),e.index||a()}function n(){const n=t("#searchModal");if(!n)return;n.style.display="none",document.body.classList.remove("modal-open"),e.isOpen=!1}function a(){fetch("/index.json",{cache:"no-store"}).then(e=>e.json()).then(t=>{e.index=t.items||[]}).catch(()=>{e.index=[]})}function r(t,n){return function(...s){clearTimeout(e.debounceTimer),e.debounceTimer=setTimeout(()=>t.apply(this,s),n)}}function c(e){return(e||"").toLowerCase().split(/[^a-z0-9]+/).filter(Boolean)}function l(e,t){if(!t.length)return 0;const s=(e.title||"").toLowerCase(),o=(e.description||"").toLowerCase();let n=0;for(const i of t)s.includes(i)&&(n+=3),o.includes(i)&&(n+=1),(e.type||"").toLowerCase().includes(i)&&(n+=.5);return n}function o(e){const t=document.body&&document.body.dataset.currency||"$";return e.price?`${t}${Number(e.price).toFixed(2)}`:e.price_min&&e.price_max?`${t}${Number(e.price_min).toFixed(2)} – ${t}${Number(e.price_max).toFixed(2)}`:e.price_min?`${t}${Number(e.price_min).toFixed(2)}`:""}function s(e){const n=t("#searchResults");if(!n)return;if(n.innerHTML="",!e.length){n.innerHTML="<p>No results found.</p>";return}for(const t of e){const s=document.createElement("a");s.href=t.url,s.className="search-result",s.innerHTML=`
        ${t.image?`<img src="${t.image}" alt=""/>`:""}
        <div class="info">
          <div class="title">${t.title}</div>
          <div class="meta"><span class="badge">${t.type}</span>${o(t)?` · <span class="price">${o(t)}</span>`:""}</div>
          ${t.description?`<div class="desc">${t.description}</div>`:""}
        </div>
      `,n.appendChild(s)}}const d=r(function(){const o=(t("#searchInput")?.value||"").trim();if(!e.index){s([]);return}const n=c(o);if(!n.length){s([]);return}const i=e.index.map(e=>({...e,_score:l(e,n)})).filter(e=>e._score>0).sort((e,t)=>t._score-e._score).slice(0,20);s(i)},200);document.addEventListener("DOMContentLoaded",function(){const s=t(".search-toggle"),o=t("#searchModal"),a=t("#closeSearchModal"),r=t("#searchInput"),c=t("#searchResults");s&&s.addEventListener("click",i),a&&a.addEventListener("click",n),o&&window.addEventListener("click",function(e){e.target===o&&n()}),r&&r.addEventListener("input",d),document.addEventListener("keydown",function(t){t.key==="Escape"&&e.isOpen&&n()})})})()