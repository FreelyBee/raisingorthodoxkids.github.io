(function(){const e={index:null,isOpen:!1,debounceTimer:null};function t(e){return document.querySelector(e)}function u(e){return Array.from(document.querySelectorAll(e))}function n(){const s=t("#searchModal");if(!s)return;s.style.display="block",document.body.classList.add("modal-open"),e.isOpen=!0;const n=t("#searchInput");n&&(n.focus(),n.select()),e.index||a()}function s(){const n=t("#searchModal");if(!n)return;n.style.display="none",document.body.classList.remove("modal-open"),e.isOpen=!1}function a(){fetch("/index.json",{cache:"no-store"}).then(e=>e.json()).then(t=>{e.index=t.items||[]}).catch(()=>{e.index=[]})}function r(t,n){return function(...s){clearTimeout(e.debounceTimer),e.debounceTimer=setTimeout(()=>t.apply(this,s),n)}}function c(e){return(e||"").toLowerCase().split(/[^a-z0-9]+/).filter(Boolean)}function l(e,t){if(!t.length)return 0;const s=(e.title||"").toLowerCase(),o=(e.description||"").toLowerCase();let n=0;for(const i of t)s.includes(i)&&(n+=3),o.includes(i)&&(n+=1),(e.type||"").toLowerCase().includes(i)&&(n+=.5);return n}function i(e){const t=document.body&&document.body.dataset.currency||"$";return e.price?`${t}${Number(e.price).toFixed(2)}`:e.price_min&&e.price_max?`${t}${Number(e.price_min).toFixed(2)} – ${t}${Number(e.price_max).toFixed(2)}`:e.price_min?`${t}${Number(e.price_min).toFixed(2)}`:""}function o(e){const n=t("#searchResults");if(!n)return;if(n.innerHTML="",!e.length){n.innerHTML="<p>No results found.</p>";return}for(const t of e){const s=document.createElement("a"),o=(t.type||"").toLowerCase(),a=o==="products"||o==="gifts"?"gift":o==="collections"?"collection":"page",r=a.charAt(0).toUpperCase()+a.slice(1);s.href=t.url,s.className="search-result",s.innerHTML=`
        ${t.image?`<img src="${t.image}" alt=""/>`:""}
        <div class="info">
          <div class="title">${t.title}</div>
          <div class="meta"><span class="badge type-${a}">${r}</span>${i(t)?` · <span class="price">${i(t)}</span>`:""}</div>
          ${t.description?`<div class="desc">${t.description}</div>`:""}
        </div>
      `,n.appendChild(s)}}const d=r(function(){const s=(t("#searchInput")?.value||"").trim();if(!e.index){o([]);return}const n=c(s);if(!n.length){o([]);return}const i=e.index.map(e=>({...e,_score:l(e,n)})).filter(e=>e._score>0).sort((e,t)=>t._score-e._score).slice(0,20);o(i)},200);document.addEventListener("DOMContentLoaded",function(){const i=t(".search-toggle"),a=t("#searchModal"),r=t("#closeSearchModal"),o=t("#searchInput"),c=t("#searchResults");i&&i.addEventListener("click",n),r&&r.addEventListener("click",s),a&&window.addEventListener("click",function(e){e.target===a&&s()}),o&&o.addEventListener("input",d),o&&o.addEventListener("keydown",function(e){if(e.key==="Enter"){const e=c&&c.querySelector("a.search-result");e&&(window.location.href=e.href)}}),document.addEventListener("keydown",function(t){if(t.key==="Escape"&&e.isOpen){s();return}if(t.key==="k"&&(t.metaKey||t.ctrlKey)){t.preventDefault(),n();return}if(t.key==="/"&&!e.isOpen){const e=document.activeElement;if(e&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable))return;t.preventDefault(),n();return}})})})()